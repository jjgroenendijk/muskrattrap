services:
    nodered:
        image: nodered/node-red:latest
        hostname: nodered
        container_name: nodered
        restart: unless-stopped
        env_file:
          - variables.env
        network_mode: host
        volumes:
        - ./nodered:/data
        - ./nodered/flows.json:/data/flows.json
        - ./nodered/package.json:/data/package.json
        - ./nodered/flows_cred.json:/data/flows_cred.json

    mariadb:
        image: lscr.io/linuxserver/mariadb:latest
        container_name: mariadb
        hostname: mariadb
        restart: unless-stopped
        env_file:
          - variables.env
        volumes:
        - ./mariadb/config:/config
        - ./databaseSetup.sql:/config/initdb.d/databaseSetup.sql
        ports:
        - 3306:3306

    phpmyadmin:
        image: lscr.io/linuxserver/phpmyadmin:latest
        container_name: phpmyadmin
        hostname: phpmyadmin
        restart: unless-stopped
        env_file:
          - variables.env
        volumes:
        - ./phpmyadmin/config:/config
        ports:
        - 8086:80

    grafana:
        image: grafana/grafana-enterprise
        container_name: grafana
        hostname: grafana
        restart: unless-stopped
        env_file:
          - variables.env
        ports:
        - 3000:3000
        volumes:
        - ./grafana/data:/var/lib/grafana
